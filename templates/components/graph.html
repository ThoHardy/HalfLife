{% if stats %}
<section class="mb-8 bg-gray-800/50 rounded-xl p-4 border border-gray-700">
    <h4 class="text-[10px] uppercase tracking-widest text-gray-500 mb-4 text-center">7-Day Energy Output (Total Stars)
    </h4>
    <div class="flex items-end justify-between h-32 gap-2 px-2">
        {% set graph_max = 20 %}
        {% for day in stats %}
        {% set percentage = ((day.total / graph_max) * 100) | int %}
        {% if percentage > 100 %}{% set percentage = 100 %}{% endif %}
        <div class="flex-1 flex flex-col items-center gap-2 group h-full">
            <div class="flex-grow w-full flex flex-col justify-end">
                <div class="w-full bg-blue-500 border border-blue-400/50 rounded-t-sm relative flex items-end justify-center hover:bg-blue-400 transition-all"
                    style="height: {{ [percentage, 8] | max }}%;">
                    <span
                        class="absolute -top-5 opacity-0 group-hover:opacity-100 text-[10px] font-bold text-blue-400 transition-opacity whitespace-nowrap">
                        {{ day.total }}{% if day.total >= graph_max %}+{% endif %}
                    </span>
                </div>
            </div>
            <span class="text-[9px] text-gray-600 font-mono">{{ day.date[-2:] }}</span>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}